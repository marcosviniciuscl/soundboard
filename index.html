<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline'; media-src 'self' file:;">
    <title>Soundboard - Atalhos de Áudio</title>
    <link rel="stylesheet" href="./styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>🎵 Hahaha</h1>
            <p class="subtitle">Atalhos de áudio personalizados</p>
        </header>

        <!-- <div class="controls">
            <button class="btn-add" onclick="openAddModal()">➕ Adicionar Áudio</button>
            <button class="btn-edit" onclick="openEditModal()">✏️ Editar Selecionado</button>
            <button class="btn-remove" onclick="removeSound()">🗑️ Remover Selecionado</button>
            <button class="btn-test" onclick="testSelected()">▶️ Testar Som</button>
            <button id="viewToggleButton" class="btn-test" onclick="toggleView()" style="min-width: 60px; justify-content: center; font-size: 1.5em; padding: 10px;">
                ☰
            </button>
            <button class="btn-test" ...>🌐 Buscar Online</button> <button class="btn-edit" onclick="importProfile()" style="min-width: 130px;">📥 Importar</button>
            <button class="btn-edit" onclick="exportProfile()" style="min-width: 130px;">📤 Exportar</button>
            
            <div class="form-group-check" style="margin-bottom: 0; margin-left: auto; padding: 10px; background: rgba(244, 51, 51, 0.1); border-radius: 8px;">
                <input type="checkbox" id="networkMuteCheck" onchange="toggleNetworkMute(this)">
                <label for="networkMuteCheck" style="color: #f44336; font-weight: bold;">🤫 Não Incomodar (Rede)</label>
            </div>
        </div> -->

        <div class="controls">
            <button class="btn-add" onclick="openAddModal()">➕ Adicionar Áudio</button>
            <button class="btn-edit" onclick="openEditModal()">✏️ Editar Selecionado</button>
            <button class="btn-remove" onclick="removeSound()">🗑️ Remover Selecionado</button>
            <button class="btn-test" onclick="testSelected()">▶️ Testar Som</button>
            <button id="viewToggleButton" class="btn-test" onclick="toggleView()" style="min-width: 60px; justify-content: center; font-size: 1.5em; padding: 10px;">
                ☰
            </button>
        </div>

        <div id="networkMuteBanner" style="display: none; padding: 15px; background: #c0392b; color: white; font-weight: bold; text-align: center; border-radius: 8px; margin-bottom: 20px;">
            🤫 O Mudo da Rede está ATIVADO. Nenhum som será tocado.
        </div>

        <div id="soundsContainer" class="sounds-grid">
            </div>

        <div id="tableOrderInfo" class"info" style="display: none; margin-bottom: 20px; background: rgba(33, 150, 243, 0.1); border: 1px solid rgba(33, 150, 243, 0.3); border-radius: 8px; color: #2196F3; padding: 15px; text-align: center;">
            💡 Arraste e solte as linhas da tabela para reordenar. Os <b>10 primeiros</b> sons aparecerão no menu de acesso rápido (Ctrl+Shift+Espaço).
        </div>
        
        <div id="tableContainer" class="sounds-table-container">
            </div>


        <div class="global-settings-container">
            <div class="audio-output-selector">
                <label for="audioOutputSelect">🔊 Saída de Áudio:</label>
                <select id="audioOutputSelect" onchange="saveGlobalSettings()">
                    <option value="default">Padrão do Sistema</option>
                </select>
            </div>
            
            <div class="audio-output-selector" style="margin-top: -10px;">
                <input type="checkbox" id="volumeBoostCheck" onchange="saveGlobalSettings()" style="width: 20px; height: 20px;">
                <label for="volumeBoostCheck" style="flex: 1; cursor: pointer;">⚡ Ativar "Boost" de Volume (Sistema)</label>
                
                <input type="number" id="volumeBoostAmount" value="20" min="1" max="100" onchange="saveGlobalSettings()" style="width: 70px; padding: 10px;">
                <label for="volumeBoostAmount" style="margin-right: 5px;">+%</label>
            </div>
        </div>

        
        <div class="info">
            💡 Duplo clique para testar • Atalhos funcionam mesmo com a janela minimizada
        </div>

        <div class="global-controls" style="margin-right: auto; display: flex; align-items: center; gap: 15px; margin-top: 10px;">    
            <button class="btn-test" onclick="importProfile()" title="Importar Perfil (.zip)" style="padding: 10px 14px; font-size: 1.2em;">
                📥
            </button>
            <button class="btn-test" onclick="exportProfile()" title="Exportar Perfil (.zip)" style="padding: 10px 14px; font-size: 1.2em;">
                📤
            </button>
            
            <div class="form-group-check" style="margin-bottom: 0; padding: 10px; background: rgba(244, 51, 51, 0.1); border-radius: 8px;">
                <input type="checkbox" id="networkMuteCheck" onchange="toggleNetworkMute(this)">
                <label for="networkMuteCheck" style="color: #f44336; font-weight: bold;">🤫 Não Incomodar</label>
            </div>
        </div>
    </div>


    <div id="addModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeAddModal()">&times;</span>
            <h2 class="modal-header" id="modalTitle">Adicionar Novo Som</h2>
            <input type="hidden" id="originalSoundName" value="">
            <div class="form-group">
                <label>Nome do Som:</label>
                <input type="text" id="soundName" placeholder="Ex: Risada do Chaves">
            </div>
            <div class="form-group">
                <label>Atalho:</label>
                <input type="text" id="soundHotkey" placeholder="Clique aqui e pressione as teclas..." readonly style="cursor: pointer;">
                <small style="color: #888; display: block; margin-top: 5px;">
                    Use Ctrl, Shift, Alt.
                </small>
                <button class="btn-test" onclick="clearHotkey()" style="margin-top: 8px; width: 100%;">
                    🔄 Limpar Atalho
                </button>
            </div>
            <div class="form-group">
                <label>Arquivo de Áudio:</label>
                <div class="file-selector">
                    <div class="file-name" id="fileName">Nenhum arquivo selecionado</div>
                    <button class="btn-test" onclick="selectFile()" style="flex: 0 0 auto;">
                        📁 Escolher
                    </button>
                </div>
                <small id="audioDuration" style="color: #888; display: block; margin-top: 5px; min-height: 1.2em;"></small>
            </div>
            <div class="form-group form-group-inline">
                <div>
                    <label>Início (segundos):</label>
                    <input type="number" id="soundStartTime" min="0" step="0.1" value="0">
                </div>
                <div>
                    <label>Fim (segundos):</label>
                    <input type="number" id="soundEndTime" min="0" step="0.1" value="0">
                </div>
            </div>
             <small style="color: #888; display: block; margin-top: -15px; margin-bottom: 15px;">
                Deixe "Fim" como 0 para tocar até o final.
            </small>
            <div class="form-group">
                <div class="slider-label">
                    <label>Volume:</label>
                    <span id="volumeValue">100%</span>
                </div>
                <input type="range" id="soundVolume" min="0" max="1" step="0.01" value="1" oninput="updateSliderLabels()">
            </div>
            <div class="form-group">
                 <div class="slider-label">
                    <label>Velocidade:</label>
                    <span id="speedValue">1.0x</span>
                </div>
                <input type="range" id="soundSpeed" min="0.5" max="2" step="0.1" value="1" oninput="updateSliderLabels()">
            </div>
            <div class="form-group form-group-check">
                <input type="checkbox" id="soundLoop">
                <label for="soundLoop">Repetir (Loop)</label>
            </div>
            
            <div class="modal-actions">
                <button class="btn-add" onclick="saveSound()">💾 Salvar</button>
                <button class="btn-test" type="button" onclick="previewSound(event)">▶️ Prévia</button>
                <button class="btn-remove" type="button" onclick="closeAddModal()">❌ Cancelar</button>
            </div>
        </div>
    </div>


    <script src="./renderer.js" defer></script>
</body>
</html>